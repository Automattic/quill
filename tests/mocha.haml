!!! 5
%html
  %head
    %title Stypi Editor All Unit Tests
    %link{:rel => 'stylesheet', :type => 'text/css', :href => '../lib/mocha.css'}
    :css
      #expected-container, #test-container {
        float: left;
        width: 45%;
      }
      #expected-container, #test-container, #format-container {
        margin-left: 10px;
      }
      iframe { border: 1px solid gray; }
    %meta{:charset => 'utf-8'}

  %body
    #mocha
    #format-container
      %button.bold Bold
      %button.link Link
      %select.size
        %option{:value => 'small'}   Small
        %option{:value => false, :selected => true} Normal
        %option{:value => 'large'}   Large
        %option{:value => 'huge'}    Huge
    #test-container
    #expected-container

    // Need to separate files for code coverage
    %script{:type => 'text/javascript', :src => 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'}

    - libs = ['async', 'underscore', 'eventemitter2', 'linked_list', 'rangy-core', 'tandem-core']
    - libs.each do |lib|
      %script{:type => 'text/javascript', :src => "../lib/#{lib}.js"}

    %script{:type => 'text/javascript', :src => "../scribe-exposed.js"}
    / %script{:type => 'text/javascript', :src => '../src/ext/require.js'}
    / - srcs = ['debug', 'document', 'dom', 'editor', 'format', 'format-manager', 'keyboard', 'leaf-iterator', 'leaf', 'line', 'normalizer', 'paste-manager', 'position', 'range', 'renderer', 'selection', 'undo-manager', 'utils', 'modules/attribution', 'modules/cursor', 'modules/link-tooltip', 'modules/toolbar']
    / - srcs.each do |src|
    /   %script{:type => 'text/javascript', :src => "../src/#{src}.js"}

    %script{:type => 'text/javascript', :src => '../lib/mocha.js'}
    %script{:type => 'text/javascript', :src => '../lib/expect.js'}
    :javascript
      mocha.setup('bdd');
    = yield
    :javascript
      if (window.mochaPhantomJS) {
        mochaPhantomJS.run();
      } else {
        mocha.run();
      }
